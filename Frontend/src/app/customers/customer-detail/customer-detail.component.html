<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js" xmlns=""></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>

<div *ngIf="customer">
  <div class="row">
    <div class="col-md-2">
      <p>
        <strong>{{customer.firstname}} {{customer.lastname}}</strong>
        <br/>
        Tlf: {{customer.phone}}
        <br/>
        CVR-Nr: {{customer.cvr}}
      </p>
    </div>
    <div class="col-md-1 offset-md-9">

      <button class="btn-link" style="outline: none" (click)="open(content)">Kundeoplysninger</button>
      <button class="btn-link" style="outline: none" (click)="openEdit(editContent)">Redigér kunde</button>
      <button class="btn-link" style="outline: none" (click)="open(deleteContent)">Slet</button>

    </div>
  </div>
  <div class="row">

    <tabs class="col-md-12 customerTab">
      <tab tabTitle="Tilbud">
        <app-proposition-list [customer]="customer"></app-proposition-list>
      </tab>
      <tab tabTitle="Slutseddel">
        SLUTSEDDEL!
      </tab>
      <tab tabTitle="Maskinliste">
        <app-equipment-list [customer]="customer"></app-equipment-list>
      </tab>
      <tab tabTitle="Besøg">
        BESØG!
      </tab>
    </tabs>
  </div>
</div>

<ng-template #content let-c="close">
  <div class="modal-header">
    <h3 class="contentModal-title">Kundeoplysninger</h3>
    <button type="button" class="close" aria-label="Close" (click)="c('Close click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <h4>Navn: {{customer.firstname}} {{customer.lastname}}</h4>
    <h4>CVR-nr: {{customer.cvr}} </h4>
    <h4>Adresse: {{customer.address}}</h4>
    <h4>By: {{customer.zipCode}} {{customer.city}}</h4>
    <h4>Tlf: {{customer.phone}} </h4>
    <h4>Email: {{customer.email}}</h4>
    <p></p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-secondary" (click)="c('Close click')">Luk</button>
  </div>

</ng-template>
<ng-template #editContent let-c="close">
  <div class="modal-header">
    <h3 class="editModal-title">Redigér kunde</h3>
    <button type="button" class="close" aria-label="Close" (click)="c('Close click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="col-md-4">
      <h4 class="property-text">Fornavn: </h4>
      <h4 class="property-text">Efternavn: </h4>
      <h4 class="property-text">CVR-nr: </h4>
      <h4 class="property-text">Adresse: </h4>
      <h4 class="property-text">Postnr: </h4>
      <h4 class="property-text">By: </h4>
      <h4 class="property-text">Tlf: </h4>
      <h4 class="property-text">Email: </h4>
    </div>
    <div class=" input-container col-md-8">
      <input class="input form-control" type="text" (change)="changes = true" [(ngModel)]="editCustomer.firstname">
      <input class="input form-control" type="text" (change)="changes = true" [(ngModel)]="editCustomer.lastname">
      <input class="input form-control no-spin" (change)="changes = true" type="number" [(ngModel)]="editCustomer.cvr">
      <input class="input form-control" type="text" (change)="changes = true" [(ngModel)]="editCustomer.address">
      <input class="input form-control no-spin" (change)="changes = true" type="number"
             [(ngModel)]="editCustomer.zipCode">
      <input class="input form-control" type="text" (change)="changes = true" [(ngModel)]="editCustomer.city">
      <input class="input form-control no-spin" (change)="changes = true" type="number"
             [(ngModel)]="editCustomer.phone">
      <input class="input form-control" type="text" (change)="changes = true" [(ngModel)]="editCustomer.email">
    </div>
  </div>
  <div class="modal-footer">
    <div class="col-md-5">
      <div *ngIf="!isSaved ">
        <div *ngIf="changes">
          <strong class="notSaved-text"> Ændringer er ikke gemt </strong>
        </div>
      </div>
    </div>
    <div class="col-md-7">
      <button type="button" class="btn btn-outline-danger" (click)="cancel(); c('Close click')">Anuller</button>
      <button type="button" class="btn btn-outline-success" (click)="updateCustomer(); c('Close click')">Gem</button>
    </div>
  </div>
</ng-template>

<ng-template #deleteContent let-c="close">
  <div class="modal-header">
    <h3 class="deleteModal-title">Slet kunde</h3>
    <button type="button" class="close" aria-label="Close" (click)="c('Close click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
  Du er igang med at slette {{customer.firstname}} {{customer.lastname}}!
  </div>
  <div class="modal-footer">
    <div class="col-md-7">
      <button type="button" class="btn btn-outline-secondary" (click)="c('Close click')">Anuller</button>
      <button type="button" class="btn btn-outline-danger" (click)=" deleteCustomer(); c('Close click')">Slet</button>
    </div>
  </div>
</ng-template>

